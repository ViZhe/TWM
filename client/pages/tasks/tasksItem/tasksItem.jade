
template(name="tasksItem")
    with task
        section.p-tasks-item
            .c-island
                .c-island__title Задача: #{title}
                .p-tasks-item__description.c-text
                    +markdown
                        #{description}
                        
                .p-tasks-item__checklist
                    | тут чеклист
            .c-island
                .c-island__title Комментарии
                //- if завершена или отменена - запретить новые комменты  
                +comments


template(name="tasksItemSub")
    with task
        .c-island
            .c-island__title Информация о задаче
            .p-tasks-item-sub
                .p-tasks-item-sub__key Статус
                .p-tasks-item-sub__value {{getStatusText status}}
                .p-tasks-item-sub__key Исполнитель
                .p-tasks-item-sub__value {{getUserLInk executorId}}
                if coExecutor
                    .p-tasks-item-sub__key Участники
                    .p-tasks-item-sub__value {{getUserLInk coExecutor}}                
                .p-tasks-item-sub__key Постановщик
                .p-tasks-item-sub__value {{getUserLInk userId}}
                .p-tasks-item-sub__key Проект
                .p-tasks-item-sub__value {{getProjectLink projectId}}
                if deadline
                    .p-tasks-item-sub__key Крайний срок
                    .p-tasks-item-sub__value #{deadline}
                .p-tasks-item-sub__key Приоритет
                .p-tasks-item-sub__value {{getPriorityText  priority}}
                .p-tasks-item-sub__key Дата создания
                .p-tasks-item-sub__value {{getDateText createdAt}}

        if isCreatorOrExecutor
            .c-island
                .c-island__title Управление задачей
                .p-tasks-item-sub
                    if isCreator
                        | Это создатель
                        if isStatus 'new' 'work'
                            .c-btn.c-btn_color_blue.c-btn_block Изменить
                            .c-btn.c-btn_color_blue.c-btn_block.js-task-control_cancel(title="Поменять статус задачи на: Отменена") Отменить
                        if isStatus 'done'
                            .c-btn.c-btn_color_blue(title="Поменять статус задачи на: Завершена") Принять
                            .c-btn.c-btn_color_blue(title="Отправить на доработку") Отклонить
                    if isExecutor
                        | Это исполнитель
                        if isStatus 'new'
                            .c-btn.c-btn_color_blue(title="Поменять статус задачи на: В работе") Принять
                        if isStatus 'work'
                            .c-btn.c-btn_color_blue(title="Поменять статус задачи на: Выполнена") Выполнить
